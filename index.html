<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gruppen-Manager</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif; }
        body { background-color: green; display: flex; flex-direction: row; height: 100vh; }
        .container { flex: 1; padding: 10px; overflow: hidden; color: white; text-align: center; }
        #left { width: 33%; border-right: 2px solid white; }
        #right { width: 67%; display: flex; flex-direction: column; }
        #top { flex: 1; border-bottom: 2px solid white; }
        #bottom { flex: 1; overflow-y: auto; }

        /* Punkte-System */
        .points-container { font-size: 20px; margin-top: 20px; }
        .points { font-size: 30px; margin: 10px; }
        button, input { font-size: 20px; margin: 5px; padding: 10px; }

        /* Spielzeug-Ausleihe */
        #borrowed { font-size: 24px; font-weight: bold; color: yellow; margin-bottom: 10px; }
        .kids-list { display: flex; flex-wrap: wrap; justify-content: center; font-size: 14px; }
        .kids-list div { margin: 5px; padding: 5px; background: white; color: black; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <!-- Linke Seite: Punkte-System -->
    <div id="left" class="container">
        <h2>Punkte-System</h2>
        <input type="text" id="newName" placeholder="Neuer Name">
        <button onclick="addKid()">Hinzufügen</button>
        <button onclick="resetScores()">Punkte zurücksetzen</button>
        <button onclick="giveAllPoints()">Allen +1</button>
        <div id="scoreboard"></div>
    </div>

    <!-- Rechte Seite -->
    <div id="right">
        
        <!-- Oben: Tagesablauf -->
        <div id="top" class="container">
            <h2>Tagesablauf</h2>
            <select id="daySelect" onchange="showSchedule()">
                <option>Montag</option><option>Dienstag</option><option>Mittwoch</option>
                <option>Donnerstag</option><option>Freitag</option>
            </select>
            <div id="scheduleDisplay"></div>
        </div>

        <!-- Unten: Spielzeug-Ausleihe -->
        <div id="bottom" class="container">
            <h2>Spielzeug-Ausleihe</h2>
            <div id="borrowed"></div>
            <div id="kidsContainer" class="kids-list"></div>
        </div>

    </div>

    <script>
        let kids = [
            "Liam", "Irem", "Malin", "Leni", "Frida G.", "Lukas", "Niklas", "Frida R.", "Matthias", "Greta",
            "Emilia", "Oskar", "Lotte", "David", "Max", "Ronja", "Romy", "Sophie", "Artur", "Zehra", "Ismail",
            "Malick", "Nela", "Mia", "Jayden"
        ].map(name => ({ name, points: 0, borrowed: "" }));

        function saveData() {
            localStorage.setItem("kids", JSON.stringify(kids));
        }

        function updateScoreboard() {
            let board = document.getElementById("scoreboard");
            board.innerHTML = "";
            kids.sort((a, b) => b.points - a.points);
            let visibleKids = kids.slice(0, 5);
            visibleKids.forEach((kid, index) => {
                board.innerHTML += `<div class="points">${index + 1}. ${kid.name}: ${kid.points} 
                <button onclick="givePoint(${index})">+1</button> 
                <button onclick="removePoint(${index})">-1</button></div>`;
            });
            setTimeout(() => {
                kids.push(kids.shift());
                updateScoreboard();
            }, 10000);
        }

        function givePoint(index) {
            kids[index].points++;
            saveData();
            updateScoreboard();
        }

        function removePoint(index) {
            kids[index].points--;
            saveData();
            updateScoreboard();
        }

        function giveAllPoints() {
            kids.forEach(kid => kid.points++);
            saveData();
            updateScoreboard();
        }

        function addKid() {
            let newName = document.getElementById("newName").value.trim();
            if (newName) {
                kids.push({ name: newName, points: 0, borrowed: "" });
                saveData();
                updateScoreboard();
                updateKidsList();
                document.getElementById("newName").value = "";
            }
        }

        function resetScores() {
            if (confirm("Bist du sicher, dass du alle Punkte zurücksetzen möchtest?")) {
                if (confirm("Wirklich sicher? Diese Aktion kann nicht rückgängig gemacht werden!")) {
                    kids.forEach(kid => kid.points = 0);
                    saveData();
                    updateScoreboard();
                }
            }
        }

        function showSchedule() {
            let day = document.getElementById("daySelect").value;
            let schedules = {
                Montag: "Spielzeit ➝ Mittagessen ➝ AGs ➝ Abholung",
                Dienstag: "Frühstück ➝ Unterricht ➝ Sport ➝ Abholzeit",
                Mittwoch: "Lesestunde ➝ Mittagessen ➝ Projekte ➝ Abholzeit",
                Donnerstag: "Kreativzeit ➝ Mittagessen ➝ Draußen-Spielen ➝ Abholzeit",
                Freitag: "Frühstück ➝ Freies Spielen ➝ Filmnachmittag ➝ Abholzeit"
            };
            document.getElementById("scheduleDisplay").innerText = schedules[day];
        }

        function updateKidsList() {
            let container = document.getElementById("kidsContainer");
            let borrowedDisplay = document.getElementById("borrowed");
            container.innerHTML = "";
            let borrowedList = kids.filter(k => k.borrowed).map(k => `<div>${k.name} hat ${k.borrowed} ausgeliehen <button onclick="returnToy('${k.name}')">X</button></div>`);
            borrowedDisplay.innerHTML = borrowedList.length ? borrowedList.join("") : "Niemand hat ein Spielzeug ausgeliehen.";
            kids.forEach(kid => {
                if (!kid.borrowed) {
                    container.innerHTML += `<div onclick="borrowToy('${kid.name}')">${kid.name}</div>`;
                }
            });
        }

        function borrowToy(name) {
            let toy = prompt(`${name} leiht sich welches Spielzeug aus?`);
            if (toy) {
                kids.find(k => k.name === name).borrowed = toy;
                saveData();
                updateKidsList();
            }
        }

        function returnToy(name) {
            kids.find(k => k.name === name).borrowed = "";
            saveData();
            updateKidsList();
        }

        updateScoreboard();
        updateKidsList();
    </script>

</body>
</html>
