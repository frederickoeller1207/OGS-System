<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit-System, Spielzeug-Ausleihe & Stundenplan</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background-color: green; color: white; display: flex; height: 100vh; }
        .container { flex: 1; padding: 10px; border-right: 2px solid white; }
        .credits-list, .toy-list { display: flex; flex-wrap: wrap; justify-content: center; }
        .name-box, .toy-box { margin: 5px; padding: 10px; background: gray; cursor: pointer; }
        .borrowed { color: red; font-weight: bold; }
        .popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; color: black; padding: 20px; display: none; border-radius: 10px; }
        .popup button { margin: 5px; padding: 10px; }
        .popup-close { background: red; color: white; cursor: pointer; }
        #schedule-container { position: absolute; bottom: 0; right: 0; width: 50%; height: 50%; }
        #image { width: 100%; height: 100%; object-fit: cover; }
        #digital-clock { position: absolute; bottom: 10px; right: 10px; font-size: 20px; background: rgba(0, 0, 0, 0.5); padding: 5px 10px; border-radius: 5px; }
    </style>
</head>
<body>

    <!-- Credit System -->
    <div class="container">
        <h1>Credit-System</h1>
        <button onclick="changeAllCredits(1)">Allen +1</button>
        <button onclick="changeAllCredits(-1)">Allen -1</button>
        <button onclick="confirmReset()">Alle zurücksetzen</button>
        <div id="credits" class="credits-list"></div>
    </div>

    <!-- Spielzeug-Ausleihe -->
    <div class="container">
        <h1>Spielzeug-Ausleihe</h1>
        <div id="toys" class="toy-list"></div>
    </div>

    <!-- Popup -->
    <div id="popup" class="popup">
        <h2 id="popup-name"></h2>
        <button onclick="updateCredit(1)">+1</button>
        <button onclick="updateCredit(-1)">-1</button>
        <button class="popup-close" onclick="closePopup()">X</button>
    </div>

    <!-- Stundenplan -->
    <div id="schedule-container">
        <img id="image" src="" alt="Stundenplan-Bild">
        <div id="digital-clock"></div>
    </div>

    <script>
        let students = ["Liam", "Irem", "Malin", "Leni", "Frida G.", "Lukas", "Niklas", "Frida R.", "Matthias", "Greta", "Emilia", "Oskar", "Lotte", "David", "Max", "Ronja", "Romy", "Sophie", "Artur", "Zehra", "Ismail", "Malick", "Nela", "Mia", "Jayden"];
        let credits = JSON.parse(localStorage.getItem("credits")) || {};
        students.forEach(name => { if (!(name in credits)) credits[name] = 0; });
        let selectedStudent = null;

        function saveCredits() { localStorage.setItem("credits", JSON.stringify(credits)); }
        function updateUI() {
            let creditsDiv = document.getElementById("credits");
            creditsDiv.innerHTML = "";
            students.forEach(name => {
                let box = document.createElement("div");
                box.classList.add("name-box");
                box.innerText = `${name}: ${credits[name]} Credits`;
                box.onclick = () => openPopup(name);
                creditsDiv.appendChild(box);
            });
        }
        function openPopup(name) { selectedStudent = name; document.getElementById("popup-name").innerText = `${name}: ${credits[name]} Credits`; document.getElementById("popup").style.display = "block"; }
        function closePopup() { document.getElementById("popup").style.display = "none"; }
        function updateCredit(amount) { if (selectedStudent) { credits[selectedStudent] += amount; saveCredits(); updateUI(); openPopup(selectedStudent); } }
        function changeAllCredits(amount) { students.forEach(name => credits[name] += amount); saveCredits(); updateUI(); }
        function confirmReset() { if (confirm("Bist du sicher, dass du alle Credits zurücksetzen möchtest?")) { students.forEach(name => credits[name] = 0); saveCredits(); updateUI(); } }

        let toyData = JSON.parse(localStorage.getItem("toyData")) || {};
        function updateToyUI() {
            let toyDiv = document.getElementById("toys");
            toyDiv.innerHTML = "";
            students.forEach(name => {
                let box = document.createElement("div");
                box.classList.add("toy-box");
                if (toyData[name]) {
                    box.classList.add("borrowed");
                    box.innerText = `${name} hat ausgeliehen: ${toyData[name]}`;
                } else { box.innerText = name; }
                box.onclick = () => borrowToy(name);
                toyDiv.appendChild(box);
            });
        }
        function borrowToy(name) {
            let toy = prompt("Welches Spielzeug wird ausgeliehen?", toyData[name] || "");
            if (toy !== null) { toy === "" ? delete toyData[name] : toyData[name] = toy; localStorage.setItem("toyData", JSON.stringify(toyData)); updateToyUI(); }
        }
        updateUI();
        updateToyUI();

        function updateClock() { 
            let now = new Date();
            document.getElementById("digital-clock").innerText = now.toLocaleTimeString("de-DE");
        }
        function updateImage() {
            let now = new Date();
            let hour = now.getHours();
            let minute = now.getMinutes();
            let filename = "default.jpg";

            if (hour === 8 && minute >= 0) filename = "bild1.jpg";
            else if (hour === 9) filename = "bild2.jpg";
            else if (hour === 10) filename = "bild3.jpg";
            else if (hour === 11) filename = "bild4.jpg";
            else if (hour === 12) filename = "bild5.jpg";
            else if (hour === 13) filename = "bild6.jpg";
            
            document.getElementById("image").src = filename;
        }

        updateClock();
        updateImage();
        setInterval(updateClock, 1000);
        setInterval(updateImage, 60000);
    </script>

</body>
</html>