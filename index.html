<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punkte- und Ausleihsystem</title>
    <style>
        body { display: flex; height: 100vh; margin: 0; font-family: Arial, sans-serif; background-color: green; color: white; }
        .container { display: flex; width: 100%; }
        .left, .right { flex: 1; padding: 10px; }
        .top, .bottom { width: 100%; }
        .right { display: flex; flex-direction: column; }
        .top { flex: 1; text-align: center; }
        .bottom { flex: 1; text-align: center; }
        .scoreboard { font-size: 24px; }
        .name-list { display: flex; flex-wrap: wrap; justify-content: center; }
        .name { margin: 5px; padding: 5px 10px; cursor: pointer; border-radius: 5px; }
        .popup { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; color: black; padding: 20px; border-radius: 5px; font-size: 24px; display: none; }
        .clock { font-size: 30px; font-weight: bold; margin-top: -10px; }
        .toy-list { display: flex; flex-wrap: wrap; justify-content: center; }
        .toy-item { margin: 5px; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        .borrowed { color: red; font-size: 24px; }
    </style>
</head>
<body>

<div class="container">
    <div class="left">
        <h1>Punktesystem</h1>
        <div id="topFive" class="scoreboard"></div>
        <div class="name-list" id="allNames"></div>
    </div>

    <div class="right">
        <div class="top">
            <h1>Tagesablauf <span class="clock" id="clock"></span></h1>
            <div id="schedule"></div>
        </div>
        <div class="bottom">
            <h1>Spielzeug-Ausleihe</h1>
            <div class="toy-list" id="toyList"></div>
        </div>
    </div>
</div>

<div id="popup" class="popup"></div>

<script>
    let kids = [
        "Liam", "Irem", "Malin", "Leni", "Frida G.", "Lukas", "Niklas", "Frida R.", "Matthias", "Greta",
        "Emilia", "Oskar", "Lotte", "David", "Max", "Ronja", "Romy", "Sophie", "Artur", "Zehra",
        "Ismail", "Malick", "Nela", "Mia", "Jayden"
    ].map(name => ({ name, points: 0 }));

    let toys = [];
    let colors = ["red", "blue", "orange", "purple", "yellow", "cyan", "pink"];
    let topFiveIndex = 0;

    function saveData() {
        localStorage.setItem("kids", JSON.stringify(kids));
        localStorage.setItem("toys", JSON.stringify(toys));
    }

    function loadData() {
        let storedKids = JSON.parse(localStorage.getItem("kids"));
        let storedToys = JSON.parse(localStorage.getItem("toys"));
        if (storedKids) kids = storedKids;
        if (storedToys) toys = storedToys;
    }

    function updateScoreboard() {
        kids.sort((a, b) => b.points - a.points);
        let topFiveHTML = "";
        for (let i = 0; i < 5; i++) {
            if (kids[i]) {
                topFiveHTML += `<div style="color: ${colors[i % colors.length]}; font-size: 30px;">${kids[i].name}: ${kids[i].points} Punkte</div>`;
            }
        }
        document.getElementById("topFive").innerHTML = topFiveHTML;

        let allNamesHTML = "";
        kids.forEach((kid, index) => {
            allNamesHTML += `<div class="name" style="background-color: ${colors[index % colors.length]};" onclick="givePoint(${index})">${kid.name}</div>`;
        });
        document.getElementById("allNames").innerHTML = allNamesHTML;
    }

    function givePoint(index) {
        kids[index].points++;
        saveData();
        updateScoreboard();
        showPopup(`${kids[index].name} hat einen Punkt bekommen!`);
    }

    function showPopup(message) {
        let popup = document.getElementById("popup");
        popup.innerText = message;
        popup.style.display = "block";
        setTimeout(() => { popup.style.display = "none"; }, 3000);
    }

    function updateClock() {
        let now = new Date();
        let timeString = now.toLocaleTimeString("de-DE", { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        document.getElementById("clock").innerText = timeString;
        setTimeout(updateClock, 1000);
    }

    function updateToyList() {
        let toyHTML = "";
        kids.forEach((kid, index) => {
            let borrowedToy = toys.find(t => t.name === kid.name);
            toyHTML += `<div class="toy-item" onclick="borrowToy(${index})">
                ${kid.name} ${borrowedToy ? `<span class="borrowed">${borrowedToy.toy}</span>` : ""}
            </div>`;
        });
        document.getElementById("toyList").innerHTML = toyHTML;
    }

    function borrowToy(index) {
        let toy = prompt(`Welches Spielzeug leiht sich ${kids[index].name} aus?`);
        if (toy) {
            toys = toys.filter(t => t.name !== kids[index].name);
            toys.push({ name: kids[index].name, toy });
            saveData();
            updateToyList();
        }
    }

    function switchTopFive() {
        topFiveIndex = (topFiveIndex + 5) % kids.length;
        updateScoreboard();
        setTimeout(switchTopFive, 10000);
    }

    loadData();
    updateScoreboard();
    updateToyList();
    updateClock();
    switchTopFive();
</script>

</body>
</html>